(this["webpackJsonpfuel-georgia"]=this["webpackJsonpfuel-georgia"]||[]).push([[0],{45:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),l=n(29),r=n.n(l),o=(n(45),n(36)),s=n(12),i=n(11),u=n(13),d=n.n(u),b=n(21),j=n(6),f=function(e){return"".concat("https://raw.githubusercontent.com/mister-giga/Fuel-Georgia/main","/").concat(e)};function p(e){return f("blob/".concat(e,".png"))}function g(e){return h.apply(this,arguments)}function h(){return(h=Object(b.a)(d.a.mark((function e(t){var n,a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f(t),e.next=3,fetch(n);case 3:if((a=e.sent).ok){e.next=6;break}throw new Error("\u10db\u10dd\u10ee\u10d3\u10d0 \u10e8\u10d4\u10ea\u10d3\u10dd\u10db\u10d0");case 6:return e.next=8,a.json();case 8:return c=e.sent,e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){window.alert(e)}var m,x=n(9),v=n(2);!function(e){e.Map="map",e.Chart="chart"}(m||(m={}));var y=Object(i.b)({key:"queryDataState",default:function(){var e=new URLSearchParams(window.location.search),t=e.get("cmp"),n=null,a=null,c=e.get("dlg");if(Boolean(c)){var l=c.split(".");if(2===l.length&&"map"===l[0]){var r=l[1];Boolean(r)&&(n=m.Map,a={companyKey:r})}else if(3===l.length&&"chart"===l[0]){var o=l[1],s=l[2];Boolean(o)&&Boolean(s)&&(n=m.Chart,a={companyKey:o,fuelKey:s})}}return{openedCompanyKeys:Boolean(t)?t.split("."):[],dialog:n,dialogData:a}}()}),w=Object(i.d)({key:"isCompanyOpenedSelector",get:function(e){return function(t){return(0,t.get)(y).openedCompanyKeys.some((function(t){return t===e}))}},set:function(e){return function(t,n){var a=t.get,c=t.set,l=a(y);c(y,Object(v.a)(Object(v.a)({},l),{},{openedCompanyKeys:n?Array.from(new Set([].concat(Object(x.a)(l.openedCompanyKeys),[e]))):l.openedCompanyKeys.filter((function(t){return t!==e}))}))}}}),k=Object(i.c)({key:"chartDataSelector",get:function(e){var t=(0,e.get)(y);return t.dialog===m.Chart?t.dialogData:null},set:function(e,t){var n=e.get,a=e.set,c=n(y);a(y,null===t?Object(v.a)(Object(v.a)({},c),{},{dialog:null,dialogData:null}):Object(v.a)(Object(v.a)({},c),{},{dialog:m.Chart,dialogData:t}))}}),N=Object(i.c)({key:"mapDataSelector",get:function(e){var t=(0,e.get)(y);return t.dialog===m.Map?t.dialogData:null},set:function(e,t){var n=e.get,a=e.set,c=n(y);a(y,null===t?Object(v.a)(Object(v.a)({},c),{},{dialog:null,dialogData:null}):Object(v.a)(Object(v.a)({},c),{},{dialog:m.Map,dialogData:t}))}}),C=n(23),D=n(1);function K(e){return e>0?"+":e<0?"-":""}function E(e){var t=e.company,n=Object(i.e)(w(t.key)),c=Object(j.a)(n,2),l=c[0],r=c[1],o=Object(a.useRef)(null),s=Object(a.useRef)(null),u=Object(a.useRef)(!1);Object(a.useEffect)((function(){if(o.current)if(null===s.current){var e;o.current.addEventListener("shown.bs.collapse",(function(){u.current=!1})),o.current.addEventListener("hidden.bs.collapse",(function(){u.current=!1})),o.current.addEventListener("show.bs.collapse",(function(){u.current=!0})),o.current.addEventListener("hide.bs.collapse",(function(){u.current=!0}));var t=null!==(e=s.current)&&void 0!==e?e:new C.a(o.current,{toggle:l});s.current=t}else{var n=s.current;l?n.show():n.hide()}}),[l]);var d=Object(i.g)(k),b=Object(i.g)(N);return Object(D.jsxs)("div",{className:"card mb-3",style:{margin:"10px"},children:[Object(D.jsxs)("div",{onClick:function(){return!u.current&&r((function(e){return!e}))},style:{alignItems:"center",display:"flex",flexDirection:"row",padding:"16px",justifyContent:"space-between",cursor:"pointer"},children:[Object(D.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[Object(D.jsx)("img",{src:p(t.key),alt:"".concat(t.key," logo"),width:"50",height:"50",style:{marginRight:"16px"}}),Object(D.jsx)("h3",{style:{padding:"0"},children:t.name})]}),Object(D.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[Object(D.jsx)("button",{type:"button",className:"btn btn-primary",style:{backgroundColor:t.color,borderColor:t.color,marginRight:"10px"},title:"\u10e0\u10e3\u10d9\u10d0",onClick:function(e){e.stopPropagation(),b({companyKey:t.key})},children:Object(D.jsx)("i",{className:"fas fa-map-marked-alt"})}),Object(D.jsx)("i",{className:"fas fa-chevron-".concat(l?"up":"down"),style:{marginLeft:"10px",marginRight:"10px"}})]})]}),Object(D.jsx)("div",{ref:o,className:"collapse",children:Object(D.jsxs)("table",{className:"table table-striped table-hover",style:{borderTop:"1px solid rgba(0,0,0,.125)"},children:[Object(D.jsx)("thead",{children:Object(D.jsxs)("tr",{children:[Object(D.jsx)("th",{scope:"col",children:"#"}),Object(D.jsx)("th",{scope:"col",children:"\u10e1\u10d0\u10ec\u10d5\u10d0\u10d5\u10d8"}),Object(D.jsx)("th",{scope:"col",children:"\u10e4\u10d0\u10e1\u10d8"}),Object(D.jsx)("th",{scope:"col",style:{textAlign:"center"},children:"+/-"}),Object(D.jsx)("th",{scope:"col"})]})}),Object(D.jsx)("tbody",{children:t.fuels.map((function(e,n){return Object(D.jsxs)("tr",{children:[Object(D.jsx)("th",{scope:"row",children:n+1}),Object(D.jsx)("td",{children:e.name}),Object(D.jsx)("td",{children:e.price.toFixed(2)}),Object(D.jsx)("td",{style:{textAlign:"center"},children:Object(D.jsxs)("span",{className:"badge ".concat((a=e.change,a>0?"bg-danger":a<0?"bg-success":"bg-secondary")),children:[K(e.change),Math.abs(e.change).toFixed(2)]})}),Object(D.jsx)("td",{style:{textAlign:"end"},children:Object(D.jsx)("button",{type:"button",onClick:function(){return d({companyKey:t.key,fuelKey:e.key})},className:"btn btn-sm btn-secondary",title:"\u10d8\u10e1\u10e2\u10dd\u10e0\u10d8\u10d8\u10e1 \u10d2\u10e0\u10d0\u10e4\u10d8\u10d9\u10e3\u10da\u10d0\u10d3 \u10dc\u10d0\u10ee\u10d5\u10d0",children:Object(D.jsx)("i",{className:"fas fa-chart-line"})})})]},e.key);var a}))})]})})]})}function R(e){return Object(D.jsxs)("div",{className:"horizontallyCentered",children:[Object(D.jsx)("div",{className:"spinner-border text-success",role:"status",children:Object(D.jsx)("span",{className:"visually-hidden"})}),Object(D.jsx)("p",{className:"lead",children:e.loadingText})]})}var L=Object(i.b)({key:"companiesAtom",default:null}),S=n(28);function M(e){var t=e.split("T")[0].split("-");return new Date(Number(t[0]),Number(t[1]),Number(t[2]))}S.a.register.apply(S.a,Object(x.a)(S.b));var B,F=["\u10d8\u10d0\u10dc","\u10d7\u10d4\u10d1","\u10db\u10d0\u10e0","\u10d0\u10de\u10e0","\u10db\u10d0\u10d8","\u10d8\u10d5\u10dc","\u10d8\u10d5\u10da","\u10d0\u10d2\u10d5","\u10e1\u10d4\u10e5","\u10dd\u10e5\u10e2","\u10dc\u10dd\u10d4","\u10d3\u10d4\u10d9"];function T(e){var t=e.originalData,n=e.color,c=Object(a.useState)(B.all),l=Object(j.a)(c,2),r=l[0],o=l[1],s=Object(a.useState)(""),i=Object(j.a)(s,2),u=i[0],d=i[1],b=Object(a.useRef)(null),f=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e,a=t;if(a.length){for(var c,l=[].concat(Object(x.a)(a.map((function(e){return{date:M(e.date),price:e.price}}))),[{date:M((new Date).toJSON()),price:a[a.length-1].price}]),o=[],s=[],i=0;i<l.length-1;i++){var u=l[i],j=l[i+1].date.getTime();if(!(u.date.getTime()>=j))for(var p=u.date;p.getTime()<j;)o.push(u.price),s.push((e=u.date,"".concat(e.getDate()," ").concat(F[e.getMonth()]," ").concat(e.getFullYear().toString().substring(2)))),p.setDate(p.getDate()+1)}r===B.pastYear?o.length>365&&(o=o.splice(o.length-365),s=s.splice(s.length-365)):r===B.pastMonth&&o.length>31&&(o=o.splice(o.length-31),s=s.splice(s.length-31)),d("".concat(s[0]," - ").concat(s[s.length-1])),null===(c=f.current)||void 0===c||c.destroy(),f.current=new S.a(b.current,{type:"line",data:{labels:s,datasets:[{label:"GEL",data:o,stepped:"before",borderColor:n,pointBackgroundColor:"white"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{type:"linear",grace:"5%",ticks:{callback:function(e,t,n){return"".concat(Number(e).toFixed(2))}}}}}})}}),[t,r,n]),Object(D.jsxs)("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[Object(D.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",padding:"5px",justifyContent:"center"},children:[Object(D.jsx)("h6",{style:{margin:"0",padding:"0",marginRight:"10px"},children:u}),Object(D.jsxs)("div",{className:"btn-group",role:"group","aria-label":"Basic radio toggle button group",children:[Object(D.jsx)("button",{className:"btn btn-outline-secondary ".concat(r===B.all?"active":""),onClick:function(){return o(B.all)},children:"\u10e7\u10d5\u10d4\u10da\u10d0"}),Object(D.jsx)("button",{className:"btn btn-outline-secondary ".concat(r===B.pastYear?"active":""),onClick:function(){return o(B.pastYear)},children:"1 \u10ec\u10da\u10d8\u10e1"}),Object(D.jsx)("button",{className:"btn btn-outline-secondary ".concat(r===B.pastMonth?"active":""),onClick:function(){return o(B.pastMonth)},children:"1 \u10d7\u10d5\u10d8\u10e1"})]})]}),Object(D.jsx)("div",{style:{flexGrow:1},children:Object(D.jsx)("canvas",{ref:b,width:"400",height:"400"})})]})}function I(){var e,t=Object(i.e)(k),n=Object(j.a)(t,2),c=n[0],l=n[1],r=Object(i.f)(L),o=Object(a.useRef)(null);Object(a.useEffect)((function(){if(null!==c&&null!==o.current&&null!==r){var e=C.b.getInstance(o.current,{});null===e&&(e=new C.b(o.current),o.current.addEventListener("hidden.bs.modal",(function(e){l(null)}))),e.show()}}),[c,l,r]);var s=Object(a.useState)(null),u=Object(j.a)(s,2),f=u[0],h=u[1],m=Object(a.useRef)(null);Object(a.useEffect)((function(){var e=null===c?null:"".concat(c.companyKey,".").concat(c.fuelKey);m.current=e,null!==e?Object(b.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a=c.companyKey,l=c.fuelKey,g("data/".concat(a,"/priceChanges/").concat(l,".json"));case 3:(null===(n=t.sent)||void 0===n?void 0:n.length)&&e===m.current&&h(n),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),O(t.t0);case 10:case"end":return t.stop()}var a,l}),t,null,[[0,7]])})))():h(null)}),[c]);var x=null===r||void 0===r?void 0:r.find((function(e){return e.key===(null===c||void 0===c?void 0:c.companyKey)})),v=null===x||void 0===x||null===(e=x.fuels)||void 0===e?void 0:e.find((function(e){return e.key===(null===c||void 0===c?void 0:c.fuelKey)}));return Boolean(v)?Object(D.jsx)("div",{className:"modal fade",ref:o,"data-bs-backdrop":"static","data-bs-keyboard":"false",tabIndex:-1,"aria-labelledby":"staticBackdropLabel","aria-hidden":"true",children:Object(D.jsx)("div",{className:"modal-dialog modal-fullscreen",children:Object(D.jsxs)("div",{className:"modal-content",children:[Object(D.jsxs)("div",{className:"modal-header",children:[Object(D.jsxs)("h3",{className:"modal-title",children:[Object(D.jsx)("img",{src:p(x.key),alt:"".concat(x.key," logo"),width:"50",height:"50",style:{marginRight:"16px"}}),"".concat(null===x||void 0===x?void 0:x.name," - ").concat(null===v||void 0===v?void 0:v.name)]}),Object(D.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(D.jsx)("div",{className:"modal-body",style:{padding:"0"},children:null===f?Object(D.jsx)(R,{loadingText:"\u10d8\u10e2\u10d5\u10d8\u10e0\u10d7\u10d4\u10d1\u10d0 \u10e1\u10d0\u10ec\u10d5\u10d0\u10d5\u10d8\u10e1 \u10d8\u10e1\u10e2\u10dd\u10e0\u10d8\u10d0..."}):Object(D.jsx)(T,{color:x.color,originalData:f})})]})})}):Object(D.jsx)(D.Fragment,{})}function P(e){var t=e.originalData,n=e.color,c=Object(a.useRef)(null),l=Object(a.useState)(null),r=Object(j.a)(l,2),o=r[0],s=r[1],i=Object(a.useState)([]),u=Object(j.a)(i,2),d=u[0],b=u[1];return Object(a.useEffect)((function(){s(new google.maps.Map(c.current,{center:{lat:-34.397,lng:150.644},zoom:8,minZoom:8}))}),[]),Object(a.useEffect)((function(){if(null!==o){var e={path:"m12 0c-4.962 0-9 4.066-9 9.065 0 7.103 8.154 14.437 8.501 14.745.143.127.321.19.499.19s.356-.063.499-.189c.347-.309 8.501-7.643 8.501-14.746 0-4.999-4.038-9.065-9-9.065zm0 14c-2.757 0-5-2.243-5-5s2.243-5 5-5 5 2.243 5 5-2.243 5-5 5z",fillColor:n,fillOpacity:.9,strokeWeight:0,rotation:0,scale:2,anchor:new google.maps.Point(15,30)};b(t.map((function(t){return new google.maps.Marker({position:new google.maps.LatLng({lat:t.lat,lng:t.lng}),map:o,title:t.address,icon:e})})))}}),[o,t,n]),Object(a.useEffect)((function(){if(null!==o&&d.length){var e=new google.maps.LatLngBounds;return d.forEach((function(t){e.extend(t.getPosition())})),o.setCenter(e.getCenter()),o.fitBounds(e),function(){d.forEach((function(e){return e.setMap(null)}))}}}),[o,d]),Object(D.jsx)("div",{style:{height:"100%"},ref:c})}function A(){var e=Object(i.e)(N),t=Object(j.a)(e,2),n=t[0],c=t[1],l=Object(i.f)(L),r=Object(a.useRef)(null);Object(a.useEffect)((function(){if(null!==n&&null!==r.current&&null!==l){var e=C.b.getInstance(r.current,{});null===e&&(e=new C.b(r.current),r.current.addEventListener("hidden.bs.modal",(function(e){c(null)}))),e.show()}}),[n,c,l]);var o=Object(a.useState)(null),s=Object(j.a)(o,2),u=s[0],f=s[1],h=Object(a.useRef)(null);Object(a.useEffect)((function(){var e=null===n?null:n.companyKey;h.current=e,null!==e?Object(b.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c=n.companyKey,g("data/".concat(c,"/locations.json"));case 3:(null===(a=t.sent)||void 0===a?void 0:a.length)&&e===h.current&&f(a),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),O(t.t0);case 10:case"end":return t.stop()}var c}),t,null,[[0,7]])})))():f(null)}),[n]);var m=null===l||void 0===l?void 0:l.find((function(e){return e.key===(null===n||void 0===n?void 0:n.companyKey)}));return Boolean(m)?Object(D.jsx)("div",{className:"modal fade",ref:r,"data-bs-backdrop":"static","data-bs-keyboard":"false",tabIndex:-1,"aria-labelledby":"staticBackdropLabel","aria-hidden":"true",children:Object(D.jsx)("div",{className:"modal-dialog modal-fullscreen",children:Object(D.jsxs)("div",{className:"modal-content",children:[Object(D.jsxs)("div",{className:"modal-header",children:[Object(D.jsxs)("h3",{className:"modal-title",children:[Object(D.jsx)("img",{src:p(m.key),alt:"".concat(m.key," logo"),width:"50",height:"50",style:{marginRight:"16px"}}),"".concat(null===m||void 0===m?void 0:m.name," - \u10db\u10d8\u10e1\u10d0\u10db\u10d0\u10e0\u10d7\u10d4\u10d1\u10d8")]}),Object(D.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(D.jsx)("div",{className:"modal-body",style:{padding:"0"},children:null===u?Object(D.jsx)(R,{loadingText:"\u10d8\u10e2\u10d5\u10d8\u10e0\u10d7\u10d4\u10d1\u10d0 \u10e1\u10d0\u10d3\u10d2\u10e3\u10e0\u10d4\u10d1\u10d8\u10e1 \u10db\u10d8\u10e1\u10d0\u10db\u10d0\u10e0\u10d7\u10d4\u10d1\u10d8..."}):Object(D.jsx)(P,{originalData:u,color:m.color})})]})})}):Object(D.jsx)(D.Fragment,{})}function Y(){var e=Object(i.e)(L),t=Object(j.a)(e,2),n=t[0],c=t[1],l=Object(s.f)(),r=Object(i.f)(y),o=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e=function(e){var t=new URLSearchParams(window.location.search);t.set("cmp",e.openedCompanyKeys.join("."));var n,a="";if(e.dialog)if(e.dialog===m.Map)a="map.".concat(null===(n=e.dialogData)||void 0===n?void 0:n.companyKey);else if(e.dialog===m.Chart){var c,l;a="chart.".concat(null===(c=e.dialogData)||void 0===c?void 0:c.companyKey,".").concat(null===(l=e.dialogData)||void 0===l?void 0:l.fuelKey)}return t.set("dlg",a),"?"+t.toString()}(r);o.current!==e&&(o.current=e,l.replace(e))}),[r,l]),Object(a.useEffect)((function(){null===n&&Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=c,e.next=4,g("data/companies.json");case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),O(e.t2);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}),[n,c]),null===n?Object(D.jsx)(R,{loadingText:"\u10d8\u10e2\u10d5\u10d8\u10e0\u10d7\u10d4\u10d1\u10d0 \u10d9\u10dd\u10db\u10de\u10d0\u10dc\u10d8\u10d4\u10d1\u10d8..."}):Object(D.jsxs)(D.Fragment,{children:[n.map((function(e){return Object(D.jsx)(E,{company:e},e.key)})),Object(D.jsx)(I,{}),Object(D.jsx)(A,{})]})}!function(e){e[e.all=0]="all",e[e.pastYear=1]="pastYear",e[e.pastMonth=2]="pastMonth"}(B||(B={}));n(53);function z(){return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("h1",{style:{padding:"20px"},children:"\u10e1\u10d0\u10ec\u10d5\u10d0\u10d5\u10d8 \u10e1\u10d0\u10e5\u10d0\u10e0\u10d7\u10d5\u10d4\u10da\u10dd\u10e8\u10d8"}),Object(D.jsx)(Y,{})]})}var G=function(){return Object(D.jsx)(i.a,{children:Object(D.jsx)(o.a,{children:Object(D.jsx)(s.c,{children:Object(D.jsx)(s.a,{path:"*",children:Object(D.jsx)(z,{})})})})})},J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,57)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,l=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),l(e),r(e)}))};r.a.render(Object(D.jsx)(c.a.StrictMode,{children:Object(D.jsx)(G,{})}),document.getElementById("root")),J()}},[[54,1,2]]]);
//# sourceMappingURL=main.a65f0910.chunk.js.map