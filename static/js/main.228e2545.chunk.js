(this["webpackJsonpfuel-georgia"]=this["webpackJsonpfuel-georgia"]||[]).push([[0],{45:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(29),l=n.n(r),s=(n(45),n(36)),o=n(11),i=n(16),u=n(15),d=n.n(u),b=n(22),j=n(8),p=function(e){return"".concat("https://raw.githubusercontent.com/mister-giga/Fuel-Georgia/main","/").concat(e)};function h(e){return p("blob/".concat(e,".png"))}function f(e){return g.apply(this,arguments)}function g(){return(g=Object(b.a)(d.a.mark((function e(t){var n,c,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p(t),e.next=3,fetch(n);case 3:if((c=e.sent).ok){e.next=6;break}throw new Error("\u10db\u10dd\u10ee\u10d3\u10d0 \u10e8\u10d4\u10ea\u10d3\u10dd\u10db\u10d0");case 6:return e.next=8,c.json();case 8:return a=e.sent,e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){window.alert(e)}var m,x=n(9),y=n(1);!function(e){e.Map="map",e.Chart="chart"}(m||(m={}));var v=Object(i.b)({key:"queryDataState",default:function(){var e=new URLSearchParams(window.location.search),t=e.get("cmp"),n=null,c=null,a=e.get("dlg");if(Boolean(a)){var r=a.split(".");if(2===r.length&&"map"===r[0]){var l=r[1];Boolean(l)&&(n=m.Map,c={companyKey:l})}else if(3===r.length&&"chart"===r[0]){var s=r[1],o=r[2];Boolean(s)&&Boolean(o)&&(n=m.Chart,c={companyKey:s,fuelKey:o})}}return{openedCompanyKeys:Boolean(t)?t.split("."):[],dialog:n,dialogData:c}}()}),w=Object(i.d)({key:"isCompanyOpenedSelector",get:function(e){return function(t){return(0,t.get)(v).openedCompanyKeys.some((function(t){return t===e}))}},set:function(e){return function(t,n){var c=t.get,a=t.set,r=c(v);a(v,Object(y.a)(Object(y.a)({},r),{},{openedCompanyKeys:n?Array.from(new Set([].concat(Object(x.a)(r.openedCompanyKeys),[e]))):r.openedCompanyKeys.filter((function(t){return t!==e}))}))}}}),k=Object(i.c)({key:"chartDataSelector",get:function(e){var t=(0,e.get)(v);return t.dialog===m.Chart?t.dialogData:null},set:function(e,t){var n=e.get,c=e.set,a=n(v);c(v,null===t?Object(y.a)(Object(y.a)({},a),{},{dialog:null,dialogData:null}):Object(y.a)(Object(y.a)({},a),{},{dialog:m.Chart,dialogData:t}))}}),C=n(27),N=n(2);function D(e){return e>0?"+":e<0?"-":""}function K(e){var t=e.company,n=Object(i.e)(w(t.key)),a=Object(j.a)(n,2),r=a[0],l=a[1],s=Object(c.useRef)(null),o=Object(c.useRef)(null),u=Object(c.useRef)(!1);Object(c.useEffect)((function(){if(s.current)if(null===o.current){var e;s.current.addEventListener("shown.bs.collapse",(function(){u.current=!1})),s.current.addEventListener("hidden.bs.collapse",(function(){u.current=!1})),s.current.addEventListener("show.bs.collapse",(function(){u.current=!0})),s.current.addEventListener("hide.bs.collapse",(function(){u.current=!0}));var t=null!==(e=o.current)&&void 0!==e?e:new C.a(s.current,{toggle:r});o.current=t}else{var n=o.current;r?n.show():n.hide()}}),[r]);var d=Object(i.g)(k);return Object(N.jsxs)("div",{className:"card mb-3",style:{margin:"10px"},children:[Object(N.jsxs)("div",{onClick:function(){return!u.current&&l((function(e){return!e}))},style:{alignItems:"center",display:"flex",flexDirection:"row",padding:"16px",justifyContent:"space-between",cursor:"pointer"},children:[Object(N.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[Object(N.jsx)("img",{src:h(t.key),alt:"".concat(t.key," logo"),width:"50",height:"50",style:{marginRight:"16px"}}),Object(N.jsx)("h3",{style:{padding:"0"},children:t.name})]}),Object(N.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[Object(N.jsx)("button",{type:"button",className:"btn btn-primary",style:{backgroundColor:t.color,borderColor:t.color,marginRight:"10px"},title:"\u10e0\u10e3\u10d9\u10d0",children:Object(N.jsx)("i",{className:"fas fa-map-marked-alt"})}),Object(N.jsx)("i",{className:"fas fa-chevron-".concat(r?"up":"down"),style:{marginLeft:"10px",marginRight:"10px"}})]})]}),Object(N.jsx)("div",{ref:s,className:"collapse",children:Object(N.jsxs)("table",{className:"table table-striped table-hover",style:{borderTop:"1px solid rgba(0,0,0,.125)"},children:[Object(N.jsx)("thead",{children:Object(N.jsxs)("tr",{children:[Object(N.jsx)("th",{scope:"col",children:"#"}),Object(N.jsx)("th",{scope:"col",children:"\u10e1\u10d0\u10ec\u10d5\u10d0\u10d5\u10d8"}),Object(N.jsx)("th",{scope:"col",children:"\u10e4\u10d0\u10e1\u10d8"}),Object(N.jsx)("th",{scope:"col",style:{textAlign:"center"},children:"+/-"}),Object(N.jsx)("th",{scope:"col"})]})}),Object(N.jsx)("tbody",{children:t.fuels.map((function(e,n){return Object(N.jsxs)("tr",{children:[Object(N.jsx)("th",{scope:"row",children:n+1}),Object(N.jsx)("td",{children:e.name}),Object(N.jsx)("td",{children:e.price.toFixed(2)}),Object(N.jsx)("td",{style:{textAlign:"center"},children:Object(N.jsxs)("span",{className:"badge ".concat((c=e.change,c>0?"bg-danger":c<0?"bg-success":"bg-secondary")),children:[D(e.change),Math.abs(e.change).toFixed(2)]})}),Object(N.jsx)("td",{style:{textAlign:"end"},children:Object(N.jsx)("button",{type:"button",onClick:function(){return d({companyKey:t.key,fuelKey:e.key})},className:"btn btn-sm btn-secondary",title:"\u10d8\u10e1\u10e2\u10dd\u10e0\u10d8\u10d8\u10e1 \u10d2\u10e0\u10d0\u10e4\u10d8\u10d9\u10e3\u10da\u10d0\u10d3 \u10dc\u10d0\u10ee\u10d5\u10d0",children:Object(N.jsx)("i",{className:"fas fa-chart-line"})})})]},e.key);var c}))})]})})]})}function R(e){return Object(N.jsxs)("div",{className:"horizontallyCentered",children:[Object(N.jsx)("div",{className:"spinner-border text-success",role:"status",children:Object(N.jsx)("span",{className:"visually-hidden"})}),Object(N.jsx)("p",{className:"lead",children:e.loadingText})]})}var E=Object(i.b)({key:"companiesAtom",default:null}),S=n(28);function F(e){var t=e.split("T")[0].split("-");return new Date(Number(t[0]),Number(t[1]),Number(t[2]))}S.a.register.apply(S.a,Object(x.a)(S.b));var L,B=["\u10d8\u10d0\u10dc","\u10d7\u10d4\u10d1","\u10db\u10d0\u10e0","\u10d0\u10de\u10e0","\u10db\u10d0\u10d8","\u10d8\u10d5\u10dc","\u10d8\u10d5\u10da","\u10d0\u10d2\u10d5","\u10e1\u10d4\u10e5","\u10dd\u10e5\u10e2","\u10dc\u10dd\u10d4","\u10d3\u10d4\u10d9"];function M(e){var t=e.originalData,n=e.color,a=Object(c.useState)(L.all),r=Object(j.a)(a,2),l=r[0],s=r[1],o=Object(c.useState)(""),i=Object(j.a)(o,2),u=i[0],d=i[1],b=Object(c.useRef)(null),p=Object(c.useRef)(null);return Object(c.useEffect)((function(){var e,c=t;if(c.length){for(var a,r=[].concat(Object(x.a)(c.map((function(e){return{date:F(e.date),price:e.price}}))),[{date:F((new Date).toJSON()),price:c[c.length-1].price}]),s=[],o=[],i=0;i<r.length-1;i++){console.log("x");var u=r[i],j=r[i+1].date.getTime();if(console.log(u.date.getTime(),j),!(u.date.getTime()>=j))for(var h=u.date;h.getTime()<j;)console.log("c"),s.push(u.price),o.push((e=u.date,"".concat(e.getDate()," ").concat(B[e.getMonth()]," ").concat(e.getFullYear().toString().substring(2)))),h.setDate(h.getDate()+1)}l===L.pastYear?s.length>365&&(s=s.splice(s.length-365),o=o.splice(o.length-365)):l===L.pastMonth&&s.length>31&&(s=s.splice(s.length-31),o=o.splice(o.length-31)),d("".concat(o[0]," - ").concat(o[o.length-1])),null===(a=p.current)||void 0===a||a.destroy(),p.current=new S.a(b.current,{type:"line",data:{labels:o,datasets:[{label:"GEL",data:s,stepped:"before",borderColor:n,pointBackgroundColor:"white"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{type:"linear",grace:"5%",ticks:{callback:function(e,t,n){return"".concat(Number(e).toFixed(2))}}}}}})}}),[t,l,n]),Object(N.jsxs)("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[Object(N.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",padding:"5px",justifyContent:"center"},children:[Object(N.jsx)("h6",{style:{margin:"0",padding:"0",marginRight:"10px"},children:u}),Object(N.jsxs)("div",{className:"btn-group",role:"group","aria-label":"Basic radio toggle button group",children:[Object(N.jsx)("button",{className:"btn btn-outline-secondary ".concat(l===L.all?"active":""),onClick:function(){return s(L.all)},children:"\u10e7\u10d5\u10d4\u10da\u10d0"}),Object(N.jsx)("button",{className:"btn btn-outline-secondary ".concat(l===L.pastYear?"active":""),onClick:function(){return s(L.pastYear)},children:"1 \u10ec\u10da\u10d8\u10e1"}),Object(N.jsx)("button",{className:"btn btn-outline-secondary ".concat(l===L.pastMonth?"active":""),onClick:function(){return s(L.pastMonth)},children:"1 \u10d7\u10d5\u10d8\u10e1"})]})]}),Object(N.jsx)("div",{style:{flexGrow:1},children:Object(N.jsx)("canvas",{ref:b,width:"400",height:"400"})})]})}function T(){var e,t=Object(i.e)(k),n=Object(j.a)(t,2),a=n[0],r=n[1],l=Object(i.f)(E),s=Object(c.useRef)(null);Object(c.useEffect)((function(){if(null!==a&&null!==s.current&&null!==l){var e=C.b.getInstance(s.current,{});null===e&&(e=new C.b(s.current),s.current.addEventListener("hidden.bs.modal",(function(e){r(null)}))),e.show()}}),[a,r,l]);var o=Object(c.useState)(null),u=Object(j.a)(o,2),p=u[0],g=u[1],m=Object(c.useRef)(null);Object(c.useEffect)((function(){var e=null===a?null:"".concat(a.companyKey,".").concat(a.fuelKey);m.current=e,null!==e?Object(b.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c=a.companyKey,r=a.fuelKey,f("data/".concat(c,"/priceChanges/").concat(r,".json"));case 3:(null===(n=t.sent)||void 0===n?void 0:n.length)&&e===m.current&&g(n),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),O(t.t0);case 10:case"end":return t.stop()}var c,r}),t,null,[[0,7]])})))():g(null)}),[a]);var x=null===l||void 0===l?void 0:l.find((function(e){return e.key===(null===a||void 0===a?void 0:a.companyKey)})),y=null===x||void 0===x||null===(e=x.fuels)||void 0===e?void 0:e.find((function(e){return e.key===(null===a||void 0===a?void 0:a.fuelKey)}));return Boolean(y)?Object(N.jsx)("div",{className:"modal fade",ref:s,"data-bs-backdrop":"static","data-bs-keyboard":"false",tabIndex:-1,"aria-labelledby":"staticBackdropLabel","aria-hidden":"true",children:Object(N.jsx)("div",{className:"modal-dialog modal-fullscreen",children:Object(N.jsxs)("div",{className:"modal-content",children:[Object(N.jsxs)("div",{className:"modal-header",children:[Object(N.jsxs)("h3",{className:"modal-title",children:[Object(N.jsx)("img",{src:h(x.key),alt:"".concat(x.key," logo"),width:"50",height:"50",style:{marginRight:"16px"}}),"".concat(null===x||void 0===x?void 0:x.name," - ").concat(null===y||void 0===y?void 0:y.name)]}),Object(N.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(N.jsx)("div",{className:"modal-body",style:{padding:"0"},children:null===p?Object(N.jsx)(R,{loadingText:"\u10d8\u10e2\u10d5\u10d8\u10e0\u10d7\u10d4\u10d1\u10d0 \u10e1\u10d0\u10ec\u10d5\u10d0\u10d5\u10d8\u10e1 \u10d8\u10e1\u10e2\u10dd\u10e0\u10d8\u10d0..."}):Object(N.jsx)(M,{color:x.color,originalData:p})})]})})}):Object(N.jsx)(N.Fragment,{})}function I(){var e=Object(i.e)(E),t=Object(j.a)(e,2),n=t[0],a=t[1],r=Object(o.f)(),l=Object(i.f)(v),s=Object(c.useRef)(null);return Object(c.useEffect)((function(){var e=function(e){var t=new URLSearchParams(window.location.search);t.set("cmp",e.openedCompanyKeys.join("."));var n,c="";if(e.dialog)if(e.dialog===m.Map)c="map.".concat(null===(n=e.dialogData)||void 0===n?void 0:n.companyKey);else if(e.dialog===m.Chart){var a,r;c="chart.".concat(null===(a=e.dialogData)||void 0===a?void 0:a.companyKey,".").concat(null===(r=e.dialogData)||void 0===r?void 0:r.fuelKey)}return t.set("dlg",c),"?"+t.toString()}(l);s.current!==e&&(s.current=e,r.push(e))}),[l,r]),Object(c.useEffect)((function(){null===n&&Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=a,e.next=4,f("data/companies.json");case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),O(e.t2);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}),[n,a]),null===n?Object(N.jsx)(R,{loadingText:"\u10d8\u10e2\u10d5\u10d8\u10e0\u10d7\u10d4\u10d1\u10d0 \u10d9\u10dd\u10db\u10de\u10d0\u10dc\u10d8\u10d4\u10d1\u10d8..."}):Object(N.jsxs)(N.Fragment,{children:[n.map((function(e){return Object(N.jsx)(K,{company:e},e.key)})),Object(N.jsx)(T,{})]})}!function(e){e[e.all=0]="all",e[e.pastYear=1]="pastYear",e[e.pastMonth=2]="pastMonth"}(L||(L={}));n(53);function A(){return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("h1",{style:{padding:"20px"},children:"\u10e1\u10d0\u10ec\u10d5\u10d0\u10d5\u10d8 \u10e1\u10d0\u10e5\u10d0\u10e0\u10d7\u10d5\u10d4\u10da\u10dd\u10e8\u10d8"}),Object(N.jsx)(I,{})]})}var Y=function(){return Object(N.jsx)(i.a,{children:Object(N.jsx)(s.a,{children:Object(N.jsx)(o.c,{children:Object(N.jsx)(o.a,{path:"*",children:Object(N.jsx)(A,{})})})})})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,57)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,l=t.getTTFB;n(e),c(e),a(e),r(e),l(e)}))};l.a.render(Object(N.jsx)(a.a.StrictMode,{children:Object(N.jsx)(Y,{})}),document.getElementById("root")),P()}},[[54,1,2]]]);
//# sourceMappingURL=main.228e2545.chunk.js.map