{"version":3,"sources":["services/DataService.tsx","services/ErrorHandler.tsx","services/QueryHelper.tsx","pages/components/CompanyItem.tsx","pages/components/LoadingComponent.tsx","services/CompaniesAtom.tsx","pages/components/ChartComponent.tsx","pages/components/CompaniesListing.tsx","pages/HomePage.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["getUrl","route","GetCompanyLogoUrl","companyKey","getAsync","a","url","fetch","response","ok","Error","json","data","HandleError","error","window","alert","DialogType","queryDataState","atom","key","default","parameters","URLSearchParams","location","search","cmp","get","dialog","dialogData","dlg","Boolean","splitted","split","length","Map","fuelKey","Chart","openedCompanyKeys","getQueryData","isCompanyOpenedSelector","selectorFamily","param","some","c","set","isOpen","x","Array","from","Set","filter","chartDataSelector","selector","newData","getSign","number","CompanyItem","props","company","useRecoilState","setIsOpen","collapseRef","useRef","collapseObjRef","isAnimatingRef","useEffect","current","addEventListener","collapse","Collapse","toggle","show","hide","setDisplayChart","useSetRecoilState","className","style","margin","onClick","alignItems","display","flexDirection","padding","justifyContent","cursor","src","alt","width","height","marginRight","name","type","backgroundColor","color","borderColor","title","marginLeft","ref","borderTop","scope","textAlign","fuels","map","f","i","price","toFixed","change","Math","abs","LoadingComponent","role","loadingText","CompaniesAtom","getDateWithoutTime","dateStr","vals","Date","Number","register","registerables","ChartRangeType","monthes","ChartItem","originalData","useState","all","chartRange","setChartRange","dateRangesStr","setDateRangesStr","canvasRef","chartRef","date","mappedData","toJSON","chartData","chartLabels","console","log","currItem","nextItem","getTime","dateTracker","push","getDate","getMonth","getFullYear","toString","substring","setDate","pastYear","splice","pastMonth","destroy","labels","datasets","label","stepped","options","responsive","maintainAspectRatio","plugins","legend","aria-label","flexGrow","ChartComponent","setChartData","companies","useRecoilValue","modalRef","modal","Modal","getInstance","event","allHistory","setAllHistory","chartKeyRef","chartKey","resp","find","fuel","data-bs-backdrop","data-bs-keyboard","tabIndex","aria-labelledby","aria-hidden","data-bs-dismiss","CompaniesListing","setCompanies","history","useHistory","queryData","lastSetUrlRef","newUrl","searchParams","join","dialogParam","getFreshUrl","HomePage","App","path","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e03f15a1.chunk.js","sourcesContent":["import Company from \"../models/Company\";\nimport PricePoint from \"../models/PricePoint\";\n\nconst baseUrl = \"https://raw.githubusercontent.com/mister-giga/Fuel-Georgia/main\";\nconst getUrl = (route:string):string => `${baseUrl}/${route}`;\n\nexport function GetCompanyLogoUrl(companyKey:string){\n    return getUrl(`blob/${companyKey}.png`);\n}\n\nasync function getAsync<T> (route:string):Promise<T> {\n    const url = getUrl(route);\n    const response = await fetch(url);\n    if(!response.ok){\n        throw new Error('მოხდა შეცდომა');\n    }\n    const data = await response.json();\n    return data;\n}\n\nexport function GetCompaniesAsync() {\n    return getAsync<Company[]>(\"data/companies.json\");\n}\n\nexport function GetLocationsAsync(companyKey:string){\n    return getAsync<Location[]>(`data/${companyKey}/locations.json`);\n}\n\nexport function GetPriceChangesAsync(companyKey:string, fuelKey:string){\n    return getAsync<PricePoint[]>(`data/${companyKey}/priceChanges/${fuelKey}.json`);\n}","export default function HandleError(error:string){\n    window.alert(error);\n}","import { atom, selector, selectorFamily } from \"recoil\";\n\nexport interface MapDialogData{\n    companyKey:string\n}\nexport interface ChartDialogData extends MapDialogData {\n    fuelKey:string\n}\n\nexport enum DialogType { Map = 'map', Chart = 'chart' }\n\nexport interface QueryData {\n    openedCompanyKeys:string[],\n    dialog: DialogType|null,\n    dialogData: MapDialogData | ChartDialogData | null\n}\n\nfunction getQueryData():QueryData{\n    const parameters = new URLSearchParams(window.location.search);\n\n    const cmp = parameters.get('cmp');\n\n    let dialog : DialogType|null = null;\n    let dialogData : MapDialogData | ChartDialogData | null = null\n\n    const dlg = parameters.get('dlg');\n\n    if(Boolean(dlg)){\n        const splitted = dlg!.split('.');\n        if(splitted.length === 2 && splitted[0] === 'map'){\n            const companyKey = splitted[1];\n            if(Boolean(companyKey)){\n                dialog = DialogType.Map;\n                dialogData = {\n                    companyKey: companyKey\n                }\n            }\n        } else if(splitted.length === 3 && splitted[0] === 'chart'){\n            const companyKey = splitted[1];\n            const fuelKey = splitted[2];\n            if(Boolean(companyKey) && Boolean(fuelKey)){\n                dialog = DialogType.Chart;\n                dialogData = {\n                    companyKey: companyKey,\n                    fuelKey: fuelKey\n                }\n            }\n        }\n    }\n\n    return {\n        openedCompanyKeys: Boolean(cmp) ? cmp!.split('.') : [],\n        dialog: dialog,\n        dialogData: dialogData\n    }\n}\n\nexport function getFreshUrl(data:QueryData) {\n    var searchParams = new URLSearchParams(window.location.search);\n    searchParams.set(\"cmp\", data.openedCompanyKeys.join('.'));\n\n    let dialogParam = \"\";\n    if(data.dialog){\n        if(data.dialog === DialogType.Map){\n            dialogParam = `map.${data.dialogData?.companyKey}`;\n        } else if(data.dialog === DialogType.Chart){\n            dialogParam = `chart.${data.dialogData?.companyKey}.${(data.dialogData as ChartDialogData)?.fuelKey}`;\n        }\n    }\n    searchParams.set('dlg', dialogParam);\n\n    const url = \"?\" + searchParams.toString();\n    return url;\n}\n\n\nexport const queryDataState = atom<QueryData>({\n    key: 'queryDataState', \n    default: getQueryData(), \n});\n\nexport const isCompanyOpenedSelector = selectorFamily<boolean, string>({\n    key:'isCompanyOpenedSelector',\n    get: param => ({get})=> get(queryDataState).openedCompanyKeys.some(c=>c === param),\n    set: companyKey => ({get, set}, isOpen) => {\n        const x =  get(queryDataState);\n        set(queryDataState, {...x, openedCompanyKeys: isOpen ? Array.from(new Set([...x.openedCompanyKeys, companyKey])): x.openedCompanyKeys.filter(c=>c!== companyKey)});\n    }\n})\n\nexport const chartDataSelector = selector<ChartDialogData|null>({\n    key: 'chartDataSelector',\n    get: ({get}) => {\n        const data = get(queryDataState);\n        if(data.dialog === DialogType.Chart){\n            return data.dialogData as ChartDialogData;\n        }\n        return null;\n    },\n    set: ({get, set}, newData) => {\n        const data = get(queryDataState);\n        if(newData === null) {\n            set(queryDataState, {...data, dialog: null, dialogData: null})\n        } else {\n            set(queryDataState, {...data, dialog: DialogType.Chart, dialogData: newData as ChartDialogData});\n        }\n    }\n});\n\n// export const isDisplayingChartSelector = selectorFamily<boolean, {companyKey:string, fuelKey:string}>({\n//     key: 'isDisplayingChartSelector',\n//     get: param => ({get}) => {\n//         const data = get(queryDataState);\n//         if(data.dialog === DialogType.Chart){\n//             const dialogData = data.dialogData as ChartDialogData;\n//             if(dialogData.companyKey === param.companyKey && dialogData.fuelKey === param.fuelKey){\n//                 return true;\n//             }\n//         }\n//         return false;\n//     },\n//     set: chartData => ({get, set}, wantsToDisplay) => {\n//         const data = get(queryDataState);\n//         if(wantsToDisplay){\n//             set(queryDataState, {...data, dialog: DialogType.Chart, dialogData: chartData});\n//         } else {\n//             //maybe check if this is the one who opened chart?\n//             set(queryDataState, {...data, dialog: null, dialogData: null});\n//         }\n//     }\n// });","import { Collapse } from 'bootstrap';\nimport React, {  useEffect, useRef } from 'react'\nimport {  useRecoilState, useSetRecoilState } from 'recoil';\nimport Company from '../../models/Company';\nimport { GetCompanyLogoUrl } from '../../services/DataService';\nimport { chartDataSelector, isCompanyOpenedSelector } from '../../services/QueryHelper';\n\nfunction getSign(number:number){\n    if(number>0)\n        return '+';\n    if(number<0)\n        return '-';\n    return '';\n}\nfunction getBadgeClass(number:number){\n    if(number>0)\n        return 'bg-danger';\n    if(number<0)\n        return 'bg-success';\n    return 'bg-secondary';\n}\n\nexport default function CompanyItem(props:{company:Company}){\n    const { company } = props;\n    const [isOpen, setIsOpen] = useRecoilState(isCompanyOpenedSelector(company.key));\n    \n    const collapseRef = useRef<HTMLDivElement|null>(null);\n    const collapseObjRef = useRef<Collapse|null>(null);\n    const isAnimatingRef = useRef<boolean>(false);\n    useEffect(()=>{\n        if(collapseRef.current){\n            if(collapseObjRef.current === null){\n                collapseRef.current.addEventListener('shown.bs.collapse', function () {\n                    isAnimatingRef.current = false;\n                });\n                collapseRef.current.addEventListener('hidden.bs.collapse', function () {\n                    isAnimatingRef.current = false;\n                });\n                collapseRef.current.addEventListener('show.bs.collapse', function () {\n                    isAnimatingRef.current = true;\n                });\n                collapseRef.current.addEventListener('hide.bs.collapse', function () {\n                    isAnimatingRef.current = true;\n                });\n                const collapse = collapseObjRef.current ?? new Collapse(collapseRef.current, { toggle: isOpen });\n                collapseObjRef.current = collapse;\n            } else {\n                const collapse = collapseObjRef.current;\n                if(isOpen){\n                    collapse.show();\n                } else {\n                    collapse.hide();\n                }\n            }            \n        }\n    },[isOpen]);\n\n    const setDisplayChart = useSetRecoilState(chartDataSelector);\n\n    const onOpenClose = () => !isAnimatingRef.current && setIsOpen(x=>!x);\n\n    return (\n        <div className=\"card mb-3\" style={{ margin:'10px' }}>\n            \n            <div onClick={onOpenClose} style={{alignItems:'center', display:'flex', flexDirection:'row', padding:'16px', justifyContent:'space-between', cursor:'pointer'}}>\n                <div style={{display:'flex', flexDirection:'row', alignItems:'center'}}>\n                    <img src={GetCompanyLogoUrl(company.key)} alt={`${company.key} logo`} width='50' height='50' style={{marginRight:'16px'}}/>\n                    <h3 style={{padding:'0'}}>{company.name}</h3>\n                </div>\n                <div style={{display:'flex', flexDirection:'row', alignItems:'center'}}>\n                    <button type=\"button\" className=\"btn btn-primary\" style={{backgroundColor:company.color, borderColor:company.color, marginRight:'10px'}} title='რუკა'><i className=\"fas fa-map-marked-alt\"></i></button>\n                    <i className={`fas fa-chevron-${isOpen ? 'up' : 'down'}`} style={{marginLeft:'10px', marginRight:'10px'}}></i>\n                </div>\n            </div>\n            \n            <div ref={collapseRef} className='collapse'>\n                <table className=\"table table-striped table-hover\" style={{borderTop:'1px solid rgba(0,0,0,.125)'}}>\n                    <thead>\n                        <tr>\n                            <th scope=\"col\">#</th>\n                            <th scope=\"col\">საწვავი</th>\n                            <th scope=\"col\">ფასი</th>\n                            <th scope=\"col\" style={{textAlign:'center'}}>+/-</th>\n                            <th scope=\"col\"></th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {company.fuels.map((f,i)=> (\n                            <tr key={f.key}>\n                                <th scope=\"row\">{i+1}</th>\n                                <td>{f.name}</td>\n                                <td>{f.price.toFixed(2)}</td>\n                                <td style={{textAlign:'center'}}><span className={`badge ${getBadgeClass(f.change)}`}>{getSign(f.change)}{Math.abs(f.change).toFixed(2)}</span></td>\n                                <td style={{textAlign:'end'}}><button type=\"button\" onClick={()=>setDisplayChart({companyKey:company.key, fuelKey:f.key})} className=\"btn btn-sm btn-secondary\" title='ისტორიის გრაფიკულად ნახვა'><i className=\"fas fa-chart-line\"></i></button></td>\n                            </tr>\n                        ))}\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    );\n}","import React from 'react'\n\nexport default function LoadingComponent(props:{loadingText:string}){\n    return (\n        <div className=\"horizontallyCentered\">\n            <div className=\"spinner-border text-success\" role=\"status\">\n                <span className=\"visually-hidden\"></span>\n            </div>\n            <p className=\"lead\">{props.loadingText}</p>\n        </div>\n    );\n}","import { atom } from \"recoil\";\nimport Company from '../models/Company';\n\nexport const CompaniesAtom = atom<Company[]|null>({\n    key: \"companiesAtom\",\n    default: null\n});\n","import React, { useEffect, useRef, useState } from 'react'\nimport { useRecoilState, useRecoilValue } from 'recoil';\nimport { chartDataSelector } from '../../services/QueryHelper'\nimport { Modal } from 'bootstrap'\nimport { CompaniesAtom } from '../../services/CompaniesAtom';\nimport { GetCompanyLogoUrl, GetPriceChangesAsync } from '../../services/DataService';\nimport PricePoint from '../../models/PricePoint';\nimport LoadingComponent from './LoadingComponent';\nimport HandleError from '../../services/ErrorHandler';\nimport { Chart,registerables } from 'chart.js';\nChart.register(...registerables);\n\nfunction getDateWithoutTime(dateStr:string):Date{\n    const vals = dateStr.split('T')[0].split('-');\n    return new Date(Number(vals[0]), Number(vals[1]), Number(vals[2]));\n}\n\nconst monthes = ['იან', 'თებ', 'მარ', 'აპრ', 'მაი', 'ივნ', 'ივლ', 'აგვ', 'სექ', 'ოქტ', 'ნოე', 'დეკ'];\n\nfunction dateToString(date:Date):string{\n    return `${date.getDate()} ${monthes[date.getMonth()]} ${date.getFullYear().toString().substring(2)}`;\n}\n\nenum ChartRangeType { all, pastYear, pastMonth }\n\nfunction ChartItem(props:{originalData:PricePoint[],color:string}){\n    const { originalData, color } = props;\n    const [chartRange, setChartRange] = useState<ChartRangeType>(ChartRangeType.all);\n\n    const [dateRangesStr, setDateRangesStr] = useState('');\n\n    const canvasRef = useRef<HTMLCanvasElement|null>(null);\n    const chartRef = useRef<Chart<\"line\", Number[], String>|null>(null);\n    \n    useEffect(()=>{\n        const data = originalData;\n\n        if(data.length){\n            const mappedData = [...data.map(x=>({\n                date: getDateWithoutTime(x.date),\n                price: x.price\n            })), {\n                date: getDateWithoutTime(new Date().toJSON()),\n                price:data[data.length - 1].price\n            }]\n\n            let chartData:Number[] = [];\n            let chartLabels:String[] = [];\n            \n            \n            for(let i = 0; i < mappedData.length - 1; i++){\n                console.log('x');\n                const currItem = mappedData[i];\n                const nextItem = mappedData[i+1].date.getTime();\n\n\n                console.log(currItem.date.getTime(), nextItem)\n                if(currItem.date.getTime() >= nextItem) continue;\n\n                let dateTracker = currItem.date;\n                while(dateTracker.getTime() < nextItem){\n                    console.log('c')\n                    chartData.push(currItem.price);\n                    chartLabels.push(dateToString(currItem.date));\n                    dateTracker.setDate(dateTracker.getDate() + 1)\n                }\n            }\n\n            if(chartRange === ChartRangeType.pastYear){\n                if(chartData.length > 365){\n                    chartData = chartData.splice(chartData.length - 365);\n                    chartLabels = chartLabels.splice(chartLabels.length - 365);\n                }\n            } else if(chartRange === ChartRangeType.pastMonth){\n                if(chartData.length > 31){\n                    chartData = chartData.splice(chartData.length - 31);\n                    chartLabels = chartLabels.splice(chartLabels.length - 31);\n                }\n            }\n\n            setDateRangesStr(`${chartLabels[0]} - ${chartLabels[chartLabels.length - 1]}`);\n            \n            chartRef.current?.destroy();\n            chartRef.current = new Chart(canvasRef.current!, {\n                type: 'line',\n                data: {\n                    labels: chartLabels,\n                    datasets: [{\n                        label: '# of Votes',\n                        data: chartData,\n                        stepped: 'before',\n                        borderColor:color\n                    }]\n                },\n                options: {\n                    responsive: true,\n                    maintainAspectRatio: false,\n                    plugins:{\n                        legend:{\n                            display:false\n                        }\n                    }\n                }\n            });\n        }\n    },[originalData, chartRange, color]);\n\n    return <div style={{height:'100%', display:'flex', flexDirection:'column'}}>\n        <div style={{display:'flex', flexDirection:'row', alignItems:'center', padding:'5px', justifyContent:'center'}}>\n            <h6 style={{margin:'0', padding:'0', marginRight:'10px'}}>{dateRangesStr}</h6>\n            <div className=\"btn-group\" role=\"group\" aria-label=\"Basic radio toggle button group\">\n                <button className={`btn btn-outline-secondary ${chartRange === ChartRangeType.all ? 'active' : ''}`} onClick={()=>setChartRange(ChartRangeType.all)}>ყველა</button>\n\n                <button className={`btn btn-outline-secondary ${chartRange === ChartRangeType.pastYear ? 'active' : ''}`} onClick={()=>setChartRange(ChartRangeType.pastYear)}>1 წლის</button>\n\n                <button className={`btn btn-outline-secondary ${chartRange === ChartRangeType.pastMonth ? 'active' : ''}`} onClick={()=>setChartRange(ChartRangeType.pastMonth)}>1 თვის</button>\n            </div>\n        </div>\n        <div style={{flexGrow:1}}>\n            <canvas ref={canvasRef} width=\"400\" height=\"400\" />\n        </div>\n    </div>\n}\n\nexport default function ChartComponent(){\n    const [chartData, setChartData] = useRecoilState(chartDataSelector);\n    const companies = useRecoilValue(CompaniesAtom);\n\n    const modalRef = useRef<HTMLDivElement>(null);\n\n    useEffect(()=>{\n        if(chartData !== null && modalRef.current !== null && companies !== null){\n            let modal = Modal.getInstance(modalRef.current, {  });\n            if(modal === null){\n                modal = new Modal(modalRef.current);\n                modalRef.current.addEventListener('hidden.bs.modal', function (event) {\n                    setChartData(null);\n                });\n            } \n            modal.show();\n        }\n    },[chartData, setChartData, companies]);\n\n    const [allHistory, setAllHistory] = useState<PricePoint[]|null>(null);\n    const chartKeyRef = useRef<string|null>(null);\n\n    useEffect(()=>{\n        const chartKey = chartData === null ? null : `${chartData.companyKey}.${chartData.fuelKey}`;\n        chartKeyRef.current = chartKey;\n        if(chartKey !== null){\n            (async () => {\n                try {\n                    const resp = await GetPriceChangesAsync(chartData!.companyKey, chartData!.fuelKey);\n                    if(resp?.length && chartKey === chartKeyRef.current){\n                        setAllHistory(resp);\n                    }\n                } catch (ex){\n                    HandleError(ex);\n                }\n            })();\n        } else {\n            setAllHistory(null);\n        }\n    }, [chartData]);\n\n    const company = companies?.find(c=>c.key === chartData?.companyKey);\n    const fuel = company?.fuels?.find(c=>c.key === chartData?.fuelKey);\n    if(!Boolean(fuel)){\n        return <></>;\n    }\n\n    \n\n    return (\n        <div className=\"modal fade\" ref={modalRef} data-bs-backdrop=\"static\" data-bs-keyboard=\"false\" tabIndex={-1} aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\n            <div className=\"modal-dialog modal-fullscreen\"> \n                <div className=\"modal-content\">\n                    <div className=\"modal-header\">\n                        <h3 className=\"modal-title\">\n                            <img src={GetCompanyLogoUrl(company!.key)} alt={`${company!.key} logo`} width='50' height='50' style={{marginRight:'16px'}}/>\n                            {`${company?.name} - ${fuel?.name}`}\n                        </h3>\n                        <button type=\"button\" className=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n                    </div>\n                    <div className=\"modal-body\" style={{padding:'0'}}>\n                        { allHistory === null ? <LoadingComponent loadingText='იტვირთება საწვავის ისტორია...'/> : <ChartItem color={company!.color} originalData={allHistory}/> }\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}","import React, { useEffect, useRef } from 'react'\nimport { useHistory } from 'react-router-dom';\nimport { useRecoilState, useRecoilValue } from 'recoil';\nimport { GetCompaniesAsync } from '../../services/DataService';\nimport HandleError from '../../services/ErrorHandler';\nimport { getFreshUrl, queryDataState } from '../../services/QueryHelper';\nimport CompanyItem from './CompanyItem';\nimport LoadingComponent from './LoadingComponent';\nimport ChartComponent from './ChartComponent'\nimport { CompaniesAtom } from '../../services/CompaniesAtom'\n\nexport default function CompaniesListing(){\n    const [companies, setCompanies] = useRecoilState(CompaniesAtom);// useState<Company[]|null>(null);\n    const history = useHistory();\n  \n    const queryData = useRecoilValue(queryDataState);    \n    const lastSetUrlRef = useRef<string|null>(null);\n    \n    useEffect(()=> {\n        const newUrl = getFreshUrl(queryData);\n        if(lastSetUrlRef.current !== newUrl){\n            lastSetUrlRef.current = newUrl;\n            history.push(newUrl);\n        }\n     }, [queryData,history]);\n\n    useEffect(()=>{\n        if(companies === null){\n            (async () => {\n                try {\n                    setCompanies(await GetCompaniesAsync());\n                } catch(ex){\n                    HandleError(ex);\n                }\n            })();\n        }\n    }, [companies, setCompanies]);\n\n    if(companies === null){\n        return <LoadingComponent loadingText=\"იტვირთება კომპანიები...\"/>;\n    }\n\n    return <>\n        {companies.map(x=><CompanyItem company={x} key={x.key}/>)}\n        <ChartComponent/>\n    </>\n}","import React from 'react'\nimport CompaniesListing from './components/CompaniesListing'\nimport './HomePage.css'\n\nexport default function HomePage(){\n\n    return <>\n        <h1 style={{padding:'20px'}}>საწვავი საქართველოში</h1>\n        <CompaniesListing/>\n    </>\n}","import React from 'react';\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport { RecoilRoot } from 'recoil';\nimport HomePage from './pages/HomePage';\n\nfunction App() {\n  return (\n    <RecoilRoot>\n      <Router>\n        <Switch>\n          <Route path=\"*\">\n            <HomePage/>\n          </Route>\n        </Switch>\n      </Router>\n    </RecoilRoot>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}