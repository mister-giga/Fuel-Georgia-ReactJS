(this["webpackJsonpfuel-georgia"]=this["webpackJsonpfuel-georgia"]||[]).push([[0],{42:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(25),l=n.n(r),s=(n(42),n(33)),o=n(6),i=n(11),u=n(10),d=n.n(u),j=n(18),b=n(3),f=function(e){return"".concat("https://raw.githubusercontent.com/mister-giga/Fuel-Georgia/main","/").concat(e)};function h(e){return f("blob/".concat(e,".png"))}function p(e){return O.apply(this,arguments)}function O(){return(O=Object(j.a)(d.a.mark((function e(t){var n,c,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f(t),e.next=3,fetch(n);case 3:if((c=e.sent).ok){e.next=6;break}throw new Error("\u10db\u10dd\u10ee\u10d3\u10d0 \u10e8\u10d4\u10ea\u10d3\u10dd\u10db\u10d0");case 6:return e.next=8,c.json();case 8:return a=e.sent,e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){window.alert(e)}var x,g=n(12),y=n(1);!function(e){e.Map="map",e.Chart="chart"}(x||(x={}));var v=Object(i.b)({key:"queryDataState",default:function(){var e=new URLSearchParams(window.location.search),t=e.get("cmp"),n=null,c=null,a=e.get("dlg");if(Boolean(a)){var r=a.split(".");if(2===r.length&&"map"===r[0]){var l=r[1];Boolean(l)&&(n=x.Map,c={companyKey:l})}else if(3===r.length&&"chart"===r[0]){var s=r[1],o=r[2];Boolean(s)&&Boolean(o)&&(n=x.Chart,c={companyKey:s,fuelKey:o})}}return{openedCompanyKeys:Boolean(t)?t.split("."):[],dialog:n,dialogData:c}}()}),w=Object(i.d)({key:"isCompanyOpenedSelector",get:function(e){return function(t){return(0,t.get)(v).openedCompanyKeys.some((function(t){return t===e}))}},set:function(e){return function(t,n){var c=t.get,a=t.set,r=c(v);a(v,Object(y.a)(Object(y.a)({},r),{},{openedCompanyKeys:n?Array.from(new Set([].concat(Object(g.a)(r.openedCompanyKeys),[e]))):r.openedCompanyKeys.filter((function(t){return t!==e}))}))}}}),k=Object(i.c)({key:"chartDataSelector",get:function(e){var t=(0,e.get)(v);return t.dialog===x.Chart?t.dialogData:null},set:function(e,t){var n=e.get,c=e.set,a=n(v);c(v,null===t?Object(y.a)(Object(y.a)({},a),{},{dialog:null,dialogData:null}):Object(y.a)(Object(y.a)({},a),{},{dialog:x.Chart,dialogData:t}))}}),C=n(24),K=n(2);function N(e){return e>0?"+":e<0?"-":""}function D(e){var t=e.company,n=Object(i.e)(w(t.key)),a=Object(b.a)(n,2),r=a[0],l=a[1],s=Object(c.useRef)(null),o=Object(c.useRef)(null),u=Object(c.useRef)(!1);Object(c.useEffect)((function(){if(s.current)if(null===o.current){var e;s.current.addEventListener("shown.bs.collapse",(function(){u.current=!1})),s.current.addEventListener("hidden.bs.collapse",(function(){u.current=!1})),s.current.addEventListener("show.bs.collapse",(function(){u.current=!0})),s.current.addEventListener("hide.bs.collapse",(function(){u.current=!0}));var t=null!==(e=o.current)&&void 0!==e?e:new C.a(s.current,{toggle:r});o.current=t}else{var n=o.current;r?n.show():n.hide()}}),[r]);var d=Object(i.g)(k);return Object(K.jsxs)("div",{className:"card mb-3",style:{margin:"10px"},children:[Object(K.jsxs)("div",{onClick:function(){return!u.current&&l((function(e){return!e}))},style:{alignItems:"center",display:"flex",flexDirection:"row",padding:"16px",justifyContent:"space-between",cursor:"pointer"},children:[Object(K.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[Object(K.jsx)("img",{src:h(t.key),alt:"".concat(t.key," logo"),width:"50",height:"50",style:{marginRight:"16px"}}),Object(K.jsx)("h3",{style:{padding:"0"},children:t.name})]}),Object(K.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[Object(K.jsx)("button",{type:"button",className:"btn btn-primary",style:{backgroundColor:t.color,borderColor:t.color,marginRight:"10px"},title:"\u10e0\u10e3\u10d9\u10d0",children:Object(K.jsx)("i",{className:"fas fa-map-marked-alt"})}),Object(K.jsx)("i",{className:"fas fa-chevron-".concat(r?"up":"down"),style:{marginLeft:"10px",marginRight:"10px"}})]})]}),Object(K.jsx)("div",{ref:s,className:"collapse",children:Object(K.jsxs)("table",{className:"table table-striped table-hover",style:{borderTop:"1px solid rgba(0,0,0,.125)"},children:[Object(K.jsx)("thead",{children:Object(K.jsxs)("tr",{children:[Object(K.jsx)("th",{scope:"col",children:"#"}),Object(K.jsx)("th",{scope:"col",children:"\u10e1\u10d0\u10ec\u10d5\u10d0\u10d5\u10d8"}),Object(K.jsx)("th",{scope:"col",children:"\u10e4\u10d0\u10e1\u10d8"}),Object(K.jsx)("th",{scope:"col",style:{textAlign:"center"},children:"+/-"}),Object(K.jsx)("th",{scope:"col"})]})}),Object(K.jsx)("tbody",{children:t.fuels.map((function(e,n){return Object(K.jsxs)("tr",{children:[Object(K.jsx)("th",{scope:"row",children:n+1}),Object(K.jsx)("td",{children:e.name}),Object(K.jsx)("td",{children:e.price.toFixed(2)}),Object(K.jsx)("td",{style:{textAlign:"center"},children:Object(K.jsxs)("span",{className:"badge ".concat((c=e.change,c>0?"bg-danger":c<0?"bg-success":"bg-secondary")),children:[N(e.change),Math.abs(e.change).toFixed(2)]})}),Object(K.jsx)("td",{style:{textAlign:"end"},children:Object(K.jsx)("button",{type:"button",onClick:function(){return d({companyKey:t.key,fuelKey:e.key})},className:"btn btn-sm btn-secondary",title:"\u10d8\u10e1\u10e2\u10dd\u10e0\u10d8\u10d8\u10e1 \u10d2\u10e0\u10d0\u10e4\u10d8\u10d9\u10e3\u10da\u10d0\u10d3 \u10dc\u10d0\u10ee\u10d5\u10d0",children:Object(K.jsx)("i",{className:"fas fa-chart-line"})})})]},e.key);var c}))})]})})]})}function E(e){return Object(K.jsxs)("div",{className:"horizontallyCentered",children:[Object(K.jsx)("div",{className:"spinner-border text-success",role:"status",children:Object(K.jsx)("span",{className:"visually-hidden"})}),Object(K.jsx)("p",{className:"lead",children:e.loadingText})]})}var R=Object(i.b)({key:"companiesAtom",default:null});function L(){var e,t=Object(i.e)(k),n=Object(b.a)(t,2),a=n[0],r=n[1],l=Object(i.f)(R),s=Object(c.useRef)(null);Object(c.useEffect)((function(){if(null!==a&&null!==s.current&&null!==l){var e=C.b.getInstance(s.current,{});null===e&&(e=new C.b(s.current),s.current.addEventListener("hidden.bs.modal",(function(e){r(null)}))),e.show()}}),[a,r,l]);var o=Object(c.useState)(null),u=Object(b.a)(o,2),f=u[0],O=u[1],x=Object(c.useRef)(null);Object(c.useEffect)((function(){var e=null===a?null:"".concat(a.companyKey,".").concat(a.fuelKey);x.current=e,null!==e?Object(j.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c=a.companyKey,r=a.fuelKey,p("data/".concat(c,"/priceChanges/").concat(r,".json"));case 3:(null===(n=t.sent)||void 0===n?void 0:n.length)&&e===x.current&&O(n),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),m(t.t0);case 10:case"end":return t.stop()}var c,r}),t,null,[[0,7]])})))():O(null)}),[a]);var g=null===l||void 0===l?void 0:l.find((function(e){return e.key===(null===a||void 0===a?void 0:a.companyKey)})),y=null===g||void 0===g||null===(e=g.fuels)||void 0===e?void 0:e.find((function(e){return e.key===(null===a||void 0===a?void 0:a.fuelKey)}));return Boolean(y)?Object(K.jsx)("div",{className:"modal fade",ref:s,"data-bs-backdrop":"static","data-bs-keyboard":"false",tabIndex:-1,"aria-labelledby":"staticBackdropLabel","aria-hidden":"true",children:Object(K.jsx)("div",{className:"modal-dialog modal-fullscreen",children:Object(K.jsxs)("div",{className:"modal-content",children:[Object(K.jsxs)("div",{className:"modal-header",children:[Object(K.jsxs)("h3",{className:"modal-title",children:[Object(K.jsx)("img",{src:h(g.key),alt:"".concat(g.key," logo"),width:"50",height:"50",style:{marginRight:"16px"}}),"".concat(null===g||void 0===g?void 0:g.name," - ").concat(null===y||void 0===y?void 0:y.name)]}),Object(K.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(K.jsx)("div",{className:"modal-body",children:null===f?Object(K.jsx)(E,{loadingText:"\u10d8\u10e2\u10d5\u10d8\u10e0\u10d7\u10d4\u10d1\u10d0 \u10e1\u10d0\u10ec\u10d5\u10d0\u10d5\u10d8\u10e1 \u10d8\u10e1\u10e2\u10dd\u10e0\u10d8\u10d0..."}):Object(K.jsx)("p",{children:f.length})})]})})}):Object(K.jsx)(K.Fragment,{})}function F(){var e=Object(i.e)(R),t=Object(b.a)(e,2),n=t[0],a=t[1],r=Object(o.f)(),l=Object(i.f)(v),s=Object(c.useRef)(null);return Object(c.useEffect)((function(){var e=function(e){var t=new URLSearchParams(window.location.search);t.set("cmp",e.openedCompanyKeys.join("."));var n,c="";if(e.dialog)if(e.dialog===x.Map)c="map.".concat(null===(n=e.dialogData)||void 0===n?void 0:n.companyKey);else if(e.dialog===x.Chart){var a,r;c="chart.".concat(null===(a=e.dialogData)||void 0===a?void 0:a.companyKey,".").concat(null===(r=e.dialogData)||void 0===r?void 0:r.fuelKey)}return t.set("dlg",c),"?"+t.toString()}(l);s.current!==e&&(s.current=e,r.push(e))}),[l,r]),Object(c.useEffect)((function(){null===n&&Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=a,e.next=4,p("data/companies.json");case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),m(e.t2);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}),[n,a]),null===n?Object(K.jsx)(E,{loadingText:"\u10d8\u10e2\u10d5\u10d8\u10e0\u10d7\u10d4\u10d1\u10d0 \u10d9\u10dd\u10db\u10de\u10d0\u10dc\u10d8\u10d4\u10d1\u10d8..."}):Object(K.jsxs)(K.Fragment,{children:[n.map((function(e){return Object(K.jsx)(D,{company:e},e.key)})),Object(K.jsx)(L,{})]})}n(50);function S(){return Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)("h1",{style:{padding:"20px"},children:"\u10e1\u10d0\u10ec\u10d5\u10d0\u10d5\u10d8 \u10e1\u10d0\u10e5\u10d0\u10e0\u10d7\u10d5\u10d4\u10da\u10dd\u10e8\u10d8"}),Object(K.jsx)(F,{})]})}var B=function(){return Object(K.jsx)(i.a,{children:Object(K.jsx)(s.a,{children:Object(K.jsx)(o.c,{children:Object(K.jsx)(o.a,{path:"*",children:Object(K.jsx)(S,{})})})})})},I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,54)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,l=t.getTTFB;n(e),c(e),a(e),r(e),l(e)}))};l.a.render(Object(K.jsx)(a.a.StrictMode,{children:Object(K.jsx)(B,{})}),document.getElementById("root")),I()}},[[51,1,2]]]);
//# sourceMappingURL=main.04610198.chunk.js.map